<head> <meta charset="utf-8" </head>
                      <div id="content_views" class="htmledit_views">
                    <article class="post_article" style="font-size: 16px;"> 
 <h2>6 软件包管理</h2> 
 <h3>6.1 软件包管理简介</h3> 
 <h4>6.1.1 软件包分类</h4> 
 <p>(1)源码包(C语言、比较慢、容易报错)</p> 
 <ul><li><strong>对外使用的如apache，用源码包</strong></li><li>脚本安装包(不需要手动安装)</li><li>优点：
   <ul><li>开源，如果有足够的能力可以修改源代码</li><li>可以自由选择所需的功能</li><li>软件是编译安装，所以更加适合自己的系统，更加稳定也效率更高</li><li>卸载方便</li></ul></li><li>缺点：
   <ul><li>安装步骤较多，尤其安装较大的软件集合时(如LAMP环境搭建)，容易出现拼写错误</li><li>编译过程时间较长，安装比二进制安装时间长</li><li>因为是编译安装，安装过程中一旦报错新手很难解决</li></ul></li></ul> 
 <p>(2)二进制包</p> 
 <ul><li>又称RPM包、系统默认包</li><li><strong>只是自己计算机使用的，适合用rpm包</strong></li><li>优点：
   <ul><li>包管理系统简单，只通过几个命令就可以实现包的安装、升级、查询和卸载</li><li>安装速度比源码包安装快得多</li></ul></li><li>缺点：
   <ul><li>经过编译，不可以再看到源代码</li><li>功能性不如源码包灵活</li><li>依赖性(安装前需要安装其他的软件)</li></ul></li></ul> 
 <h3>6.2 RPM包管理-rpm命令管理</h3> 
 <h4>6.2.1 RPM包命名规则</h4> 
 <figure class="wp-block-table" style="display:block;text-align:center;">
  <table class=""><thead><tr><th>httpd-2.2.15-15.el6.centos.1.i686.rpm</th><th>Apache包(包全名)</th></tr></thead><tbody><tr><td>httpd</td><td>软件包名</td></tr><tr><td>2.2.15</td><td>软件版本</td></tr><tr><td>15</td><td>软件发布次数</td></tr><tr><td>el6.centos</td><td>适合的Linux平台</td></tr><tr><td>i686</td><td>适合的硬件平台</td></tr><tr><td>rpm</td><td>rpm包扩展名</td></tr></tbody></table>
 </figure> 
 <ul><li><strong>包全名</strong>：操作的包是没有安装的软件包时，使用包全名。而且要注意路径。</li><li><strong>包名</strong>：操作已经安装的软件包时，使用包名。是搜索/var/lib/rpm中的数据库。</li></ul> 
 <h4>6.2.2 RPM包依赖性</h4> 
 <ul><li>树形依赖：a-&gt;b-&gt;c</li><li>环形依赖：a-&gt;b-&gt;c-&gt;a</li><li>模块依赖：模块依赖查询网站：www.rpmfind.net</li></ul> 
 <h4>6.2.3 RPM包安装</h4> 
 <p>(1)<strong>rpm包安装</strong></p> 
 <ul><li>rpm -ivh 包全名</li><li>选项： 
   <ul><li>-i(install) 安装</li><li>-v(verbose) 显示详细信息</li><li>-h(hash) 显示进度</li><li>--nodeps 不检测依赖性</li></ul></li></ul> 
 <p>(2)<strong>rpm包升级</strong></p> 
 <ul><li>rpm -Uvh 包全名
   <ul><li>-U(upgrade) 升级</li></ul></li></ul> 
 <p>(3)<strong>rpm包卸载</strong></p> 
 <ul><li>rpm -e 包名
   <ul><li>-e(erase) 卸载</li><li>--nodeps 不检测依赖性</li></ul></li></ul> 
 <h4>6.2.4 RPM包查询方式</h4> 
 <p>(1)<strong>查询rpm包是否安装</strong>：rpm -q 包名</p> 
 <ul><li>选项：
   <ul><li>-q(query) 查询</li><li>-a(all) 所有</li></ul></li><li>rmq -qa 查询所有已经安装的rpm包</li></ul> 
 <p>(2)<strong>查询软件包详细信息</strong>：rpm -qi 包名</p> 
 <ul><li>选项：
   <ul><li>-i(information) 查询软件信息</li><li>-p(package) 查询未安装包信息(包全名)</li></ul></li></ul> 
 <p>(3)<strong>查询包中文件安装位置</strong>：rpm -ql 包名</p> 
 <ul><li>选项：
   <ul><li>-l (list)列表</li><li>-p(package) 查询未安装包信息(包全名)</li></ul></li></ul> 
 <p>(4)<strong>查询系统文件属于哪个rpm包</strong>：rpm -qf 系统文件名</p> 
 <ul><li>选项：
   <ul><li>if(file) 查询系统文件属于哪个软件包</li></ul></li></ul> 
 <p>(5)<strong>查询软件包的依赖性</strong>：rpm -qR 包名</p> 
 <ul><li>选项：
   <ul><li>-R(requires) 查询软件包的依赖性</li><li>-p(package) 查询未安装包信息(包全名)</li></ul></li></ul> 
 <h4>6.2.5 校验和文件提取</h4> 
 <p>(1)<strong>rpm包校验</strong>：rpm -V 已安装的包名</p> 
 <ul><li>选项：
   <ul><li>-V(verify) 校验指定RPM包中的文件是否被修改</li></ul></li><li>验证内容中的8个信息的具体内容如下：
   <ul><li>S 文件大小是否被改变</li><li>M 文件的类型或者文件的权限(rwx)是否被修改</li><li>5 文件MD5校验和是否改变(可以看成文件内容是否改变)</li><li>D 设备的中，从代码是否改变</li><li>L 文件路径是否改变</li><li>U 文件的所有者是否改变</li><li>G 文件的所属组是否改变</li><li>T 文件的修改时间是否改变</li></ul></li><li>文件类型：
   <ul><li>c(config file) 配置文件</li><li>d(documentation) 普通文件</li><li>g(ghost file)”鬼“文件，很少见，就是该文件不应该被这个rpm包包含</li><li>l (license file)授权文件</li><li>r (read me) 描述文件</li></ul></li></ul> 
 <p>(2)<strong>rpm包中文件提取</strong>：rpm2cpio 包全名 ｜ \</p> 
 <ul><li>cpio -idv .文件绝对路径</li><li>rpm2cpio #将rpm包转换为cpio格式的命令</li><li>cpio #是一个标准工具，它用于创建软件档案文件和从档案文件中提取文件</li><li>cpio 选项 &lt;[文件｜设备]</li><li>选项：
   <ul><li>-i：copy-in模式，还原</li><li>-d：还原时自动新建目录</li><li>-v：显示还原过程</li></ul></li></ul> 
 <h3>6.3 RPM包管理-yum在线管理</h3> 
 <p>解决了rpm包的依赖性</p> 
 <h4>6.3.1 IP地址配置和网络yum源</h4> 
 <p>(1)IP地址配置</p> 
 <ul><li>setup</li><li>nmtui</li></ul> 
 <p>(2)网络yum源</p> 
 <ul><li>vi /etc/yum.repos.d/CentOS-Base.repo
   <ul><li>[base] 容器名称，一定要放在[]中</li><li>name 容器说明，可以自己随便写</li><li>mirrorlist 镜像站点，这个可以注释掉</li><li>baseurl 我们的yum源服务器的地址。默认是CentOS官方的yum源服务器，是可以使用的，如果你觉得慢可以改成你喜欢的yum源地址</li><li>enabled 此容器是否生效，如果不写或者写成enable=1都是生效，写成enable=0就是不生效</li><li>gpgcheck 如果是1是指RPM的数字证书生效，如果是0则不生效</li><li>gpgkey 数字证书的公钥文件保存位置。不用修改</li></ul></li></ul> 
 <h4>6.3.2 常用yum命令</h4> 
 <ol><li><strong>查询</strong> yum list #查询所有可用软件包列表 yum search 关键字(包名) #搜索服务器上所有和关键字相关的包</li><li><strong>安装</strong> yum -y install 包名 选项：</li></ol> 
 <ul><li>install 安装</li><li>-y 自动回答yes</li></ul> 
 <ol start="3"><li><strong>升级</strong> yum -y update 包名 选项：</li></ol> 
 <ul><li>update 升级</li><li>-y 自动回答yes</li></ul> 
 <ol start="4"><li><strong>卸载(慎用)</strong> yum -y remove 包名 选项：</li></ol> 
 <ul><li>remove 卸载</li><li>-y 自动回答yes</li></ul> 
 <ol start="5"><li><strong>yum软件组管理命令</strong></li></ol> 
 <ul><li>yum grouplist #列出所有可用的软件组列表</li><li>yum groupinstall 软件组名 #安装指定软件组，组名可以由grouplist查询出来</li><li>yum groupremove 软件组名 #卸载指定软件组</li></ul> 
 <h4>6.3.3 光盘yum源搭建(注意配置文件格式)</h4> 
 <ol><li>挂载光盘：mount /dev/cdrom /mnt/cdrom</li><li>让网络yum源文件失效： cd /etc/yum.repos.d/ mv CentOS-Base.repo CentOS-Base.repo.bak mv CentOS-Debuginfo.repo CentOS-Debuginfo.repo.bak mv CentOS-Vault.repo CentOS-Vault.repo.bak</li><li>修改光盘yum源文件： vim CentOS-Media.repo </li></ol> 
 <p>[c6-media]</p> 
 <p>name=CentOS-$releasever - Media</p> 
 <p>baseurl=file:///mnt/cdrom #地址为你自己的光盘挂载地址</p> 
 <p># file:///media/cdrom/</p> 
 <p># file:///media/cdrecorder/ #注释这两个不存在的地址</p> 
 <p>gpgcheck = 1</p> 
 <p>enabled = 1 #把enabled=0改成enabled=1，让这个yum源配置文件生效</p> 
 <p>gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</p> 
 <h3>6.4 源码包管理</h3> 
 <h4>6.4.1 源码包和RPM包的区别</h4> 
 <ol><li>安装之前的区别：概念上的区别</li><li>安装之后的区别：安装位置不同</li></ol> 
 <ul><li><strong>rpm包安装位置</strong>(安装在默认位置中) 默认安装路径 /etc/ 配置文件安装目录 /usr/bin/ 可执行文件安装目录 /usr/lib/ 程序所使用的函数库保存位置 /usr/share/doc/ 基本的软件使用手册保存位置 /usr/share/man 帮助文件保存位置 </li><li><strong>源码包安装位置</strong>(手动指定安装位置) 一般是：/usr/local/软件名/</li></ul> 
 <ol start="3"><li>安装位置不同所带来的影响</li></ol> 
 <ul><li>RPM包安装的服务可以使用系统服务管理命令(service)来管理，例如RPM包安装的apache的启动方法是：
   <ul><li>/etc/rc.d/init.d/httpd start</li><li>service httpd start</li></ul></li><li>源码包安装的服务不能被服务管理命令管理，因为没有安装到默认路径中。所以只能用绝对路径进行服务的管理，如：
   <ul><li>/usr/local/apache2/bin/apachectl start</li></ul></li></ul> 
 <h4>6.4.2 源码包安装过程</h4> 
 <ol><li>安装准备</li></ol> 
 <ul><li>安装C语言编辑器：gcc</li><li>下载源码包http://mirror.bit.edu.cn/apache/httpd/</li></ul> 
 <ol start="2"><li>安装注意事项</li></ol> 
 <ul><li>源代码保存位置：/usr/local/src/</li><li>软件安装位置：/usr/local/</li><li>如何确定安装过程是否报错
   <ul><li>安装过程停止</li><li>并出现error、warning或no的提示</li></ul></li></ul> 
 <ol start="3"><li>源码包安装过程：</li></ol> 
 <ul><li>下载源码包</li><li>解压缩下载的源码包(du -sh 目录名 #查看目录多大)</li><li>进入解压缩目录</li><li>查看说明(INSTALL和README)
   <ul><li>./configure 软件配置与检查</li><li>定义需要的功能选项。</li><li>检测系统环境是否符合安装要求</li><li>把定义好的功能选项和检测系统环境的信息都写入Makefile文件，用于后续的编辑</li><li>make 编译</li><li>如果前两步报错，只需输入make clear</li><li>make install 编译安装</li></ul></li></ul> 
 <ol start="4"><li>源码包的卸载</li></ol> 
 <ul><li>不需要卸载命令，直接删除安装目录即可，不会遗留任何垃圾文件</li><li>rm -rf /usr/local/apache2/</li></ul> 
 <h3>6.5 脚本安装包与软件包管理</h3> 
 <ol><li>脚本安装包</li></ol> 
 <ul><li>脚本安装包并不是独立的软件包类型，常见安装的是源码包</li><li>是人为把安装过程写成了自动安装的脚本，只要执行脚本，定义简单的参数，就可以完成安装</li><li>非常类似于windows下的软件的安装方式</li></ul> 
 <ol start="2"><li>Webwin</li></ol> 
 <ul><li>Webwin是一个基于Web的Linux系统管理界面。安装后即可通过图形化的方式设置用户账号、Apache、DNS、文件共享等服务。</li><li>下载软件：http://sourceforge.net/projects/webadmin/files/webmin/</li><li>解压缩，并进入解压缩目录</li><li>执行安装脚本</li></ul> 
</article>
                </div>
        