<head> <meta charset="utf-8" </head>
                      <div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1__0"></a>1 原码、反码和补码</h2> 
<p>二进制有三种不同的表示形式：原码、反码和补码，计算机内部使用<strong>补码</strong>来表示。</p> 
<p>原码：就是其二进制表示（注意：有一位符号位）。</p> 
<pre><code class="prism language-python"><span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">11</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">3</span>
<span class="token number">10</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">11</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">3</span>
</code></pre> 
<p>反码：正数的反码就是原码，负数的反码是符号位不变，其余位取反。</p> 
<pre><code class="prism language-python"><span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">11</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">3</span>
<span class="token number">11</span> <span class="token number">11</span> <span class="token number">11</span> <span class="token number">00</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">3</span>
</code></pre> 
<p>补码：正数的补码就是原码，负数的补码是反码+1。</p> 
<pre><code class="prism language-python"><span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">11</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">3</span>
<span class="token number">11</span> <span class="token number">11</span> <span class="token number">11</span> <span class="token number">01</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">3</span>
</code></pre> 
<p>符号位：最高位为符号位，0表示正数，1表示负数。在位运算中符号位也参与运算。</p> 
<h2><a id="2__29"></a>2 位运算</h2> 
<h3><a id="21__31"></a>2.1 按位非操作~</h3> 
<p><code>~</code>把<code>num</code>的补码中的0和1全部取反，符号位同样取反。</p> 
<pre><code class="prism language-python"><span class="token operator">~</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">~</span><span class="token number">0</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> 
<h3><a id="22__42"></a>2.2 按位与操作&amp;</h3> 
<p>只有两个对应位都为1时才为1。</p> 
<pre><code class="prism language-python"><span class="token number">1</span> <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">1</span> <span class="token operator">&amp;</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token number">0</span> <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token number">0</span> <span class="token operator">&amp;</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre> 
<h3><a id="23__55"></a>2.3 按位或操作｜</h3> 
<p>只要两个对应位中有一个为1时就为1。</p> 
<pre><code class="prism language-python"><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">1</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre> 
<h3><a id="24__68"></a>2.4 按位异或操作^</h3> 
<p>只有两个对应位不同时才为1。</p> 
<pre><code class="prism language-python"><span class="token number">1</span> <span class="token operator">^</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token number">1</span> <span class="token operator">^</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">0</span> <span class="token operator">^</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token number">0</span> <span class="token operator">^</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre> 
<p>异或操作的性质：满足交换律和结合律</p> 
<h3><a id="25__83"></a>2.5 按位左移操作&lt;&lt;</h3> 
<p><code>num &lt;&lt; i</code> 将 <code>num</code> 的二进制表示向左移动 <code>i</code> 位所得的值。</p> 
<pre><code class="prism language-python"><span class="token number">00</span> <span class="token number">00</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">11</span>
<span class="token number">11</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">01</span> <span class="token number">01</span> <span class="token number">10</span> <span class="token number">00</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">88</span>
</code></pre> 
<h3><a id="26__96"></a>2.6 按位右移操作&gt;&gt;</h3> 
<p><code>num &gt;&gt; i</code> 将 <code>num</code> 的二进制表示向右移动 <code>i</code> 位所得的值。</p> 
<pre><code class="prism language-python"><span class="token number">00</span> <span class="token number">00</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">11</span>
<span class="token number">11</span> <span class="token operator">&gt;&gt;</span> <span class="token number">2</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">10</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">2</span>
</code></pre> 
<h3><a id="27__109"></a>2.7 利用位运算实现快速计算</h3> 
<p>通过<code>&lt;&lt;</code> ，<code>&gt;&gt;</code> 快速计算2的倍数问题。</p> 
<pre><code class="prism language-python">n <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 计算 n<span class="token operator">*</span><span class="token number">2</span>
n <span class="token operator">&gt;&gt;</span> <span class="token number">1</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 计算 n<span class="token operator">/</span><span class="token number">2</span>，负奇数的运算不可⽤
n <span class="token operator">&lt;&lt;</span> m <span class="token operator">-</span><span class="token operator">&gt;</span> 计算 n<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span>m<span class="token punctuation">)</span>，即乘以 <span class="token number">2</span> 的 m 次⽅
n <span class="token operator">&gt;&gt;</span> m <span class="token operator">-</span><span class="token operator">&gt;</span> 计算 n<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span>m<span class="token punctuation">)</span>，即除以 <span class="token number">2</span> 的 m 次⽅
<span class="token number">1</span> <span class="token operator">&lt;&lt;</span> n <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token operator">^</span>n
</code></pre> 
<p>通过<code>^</code> 快速交换两个整数。</p> 
<pre><code class="prism language-python">a <span class="token operator">^</span><span class="token operator">=</span> b
b <span class="token operator">^</span><span class="token operator">=</span> a
a <span class="token operator">^</span><span class="token operator">=</span> b
</code></pre> 
<p>通过<code>a&amp;(-a)</code> 快速获取a的最后为1位置的整数。</p> 
<pre><code class="prism language-python"><span class="token number">00</span> <span class="token number">00</span> <span class="token number">01</span> <span class="token number">01</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">5</span>
<span class="token operator">&amp;</span>
<span class="token number">11</span> <span class="token number">11</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">5</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">01</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span>

<span class="token number">00</span> <span class="token number">00</span> <span class="token number">11</span> <span class="token number">10</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">14</span>
<span class="token operator">&amp;</span>
<span class="token number">11</span> <span class="token number">11</span> <span class="token number">00</span> <span class="token number">10</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">14</span>
<span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">10</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">2</span>
</code></pre> 
<h3><a id="28_147"></a>2.8利⽤位运算实现整数集合</h3> 
<p>一个数的二进制表示可以看作是一个集合（0表示不在集合中，1表示在集合中）。</p> 
<p>比如集合{1, 3, 4, 8}，可以表示成01 00 01 10 10， 而对应的运算也就可以看成是对集合进行的操作。</p> 
<pre><code class="prism language-python"><span class="token comment"># 元素与集合的操作</span>
a <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 把 i 插⼊到集合中
a <span class="token operator">&amp;</span> <span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 把 i 从集合中删除
a <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 判断 i 是否属于该集合（零不属于，⾮零属于）

<span class="token comment"># 集合之间的操作</span>
a 补 <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token operator">~</span>a
a 交 b <span class="token operator">-</span><span class="token operator">&gt;</span> a <span class="token operator">&amp;</span> b
a 并 b <span class="token operator">-</span><span class="token operator">&gt;</span> a <span class="token operator">|</span> b
a 差 b <span class="token operator">-</span><span class="token operator">&gt;</span> a <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">~</span>b<span class="token punctuation">)</span>
</code></pre> 
<h2><a id="3_pythonbin_168"></a>3 python的bin()函数</h2> 
<p>正数在内存中是以补码的形式存在的，输出自然也是按照补码输出，</p> 
<p>【例1】C#语言输出负数</p> 
<pre><code class="prism language-c#">class Program
{
  static void Main(string[] args) 
  { 
    string s1 = Convert.ToString(-3, 2); 
    Console.WriteLine(s1); 
    // 11111111111111111111111111111101
    
    string s2 = Convert.ToString(-3, 16);
    Console.WriteLine(s2); 
    // fffffffd
  }
}
</code></pre> 
<p>【例2】Python的bin()输出</p> 
<pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 0b11</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># -0b11</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span> <span class="token operator">&amp;</span> <span class="token number">0xffffffff</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment"># 0b11111111111111111111111111111101</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token number">0xfffffffd</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment"># 0b11111111111111111111111111111101</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">0xfffffffd</span><span class="token punctuation">)</span> <span class="token comment"># 4294967293</span>
</code></pre> 
<p>【注意】</p> 
<ol><li>Python中<code>bin</code> 一个负数（十进制表示），<strong>输出的是它的原码的二进制表示加上一个负号</strong>。</li><li>Python中的整型是补码形式存储的。</li><li>Python中整型是不限长度的，不会超出范围溢出。</li><li>所以为了获得<strong>负数（十进制表示）的补码</strong>，需要手动将其和十六进制数<code>0xffffffff</code>进行按位与操作，再交给bin()进行输出。</li></ol> 
<h2><a id="4__214"></a>4 练习题</h2> 
<p>leetcode 136.只出现一次的数字</p> 
<p>给定一个<strong>非空</strong>整数数组，除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。（尝试用位运算解决此题）</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">singleNumber</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        a <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> num <span class="token keyword">in</span> nums<span class="token punctuation">:</span>
            a <span class="token operator">=</span> a <span class="token operator">^</span> num
        <span class="token keyword">return</span> a
</code></pre>
                </div>
                